<div class="ng2-ya-table-wrapper">

    <div *ngIf="options.search" class="ng2-ya-table-search">
        <input type="search" class="form-control" [formControl]="fullTextFilter" [attr.placeholder]="state.language.search" />
    </div>

    <div *ngIf="processing" class="ng2-ya-table-processing">
        <div class="spinner-border" role="status"></div>
    </div>

    <table class="table ng2-ya-table-table" [ngClass]="options.className || ''" role="grid">
        <thead>
            <tr role="row">
                <th *ngFor="let column of state.columns" 
                    [style.width]="column.def.width"
                    [ngClass]="{'sorting-desc': column.sortOrder === 'desc', 'sorting-asc': column.sortOrder === 'asc', 'sorting': column.hasSort }"
                    [ng2YaTableSorting]="column">
                    {{column.def.title}}
                </th>
            </tr>
        </thead>
        <tbody>
            <tr *ngIf="state.showFilterRow">
                <td *ngFor="let column of state.columns">
                    <div *ngIf="column.def.filter" [ngSwitch]="column.def.filter.controlType">
                        <ng2-ya-table-filter-list *ngSwitchCase="'list'" [column]="column">
                        </ng2-ya-table-filter-list>
                        <ng2-ya-table-filter-default *ngSwitchDefault [column]="column">
                        </ng2-ya-table-filter-default>
                    </div>
                </td>
            </tr>
            <tr *ngFor="let row of rows; index as i">
                <td *ngFor="let column of columns">
                    <ng-container [ngTemplateOutlet]="getCellTemplate(column, standardCell)"
                        [ngTemplateOutletContext]="{
                            row: row,
                            rowIndex: i,
                            data: getData(row, column.name),
                            col: column
                        }">
                    </ng-container>
                    <ng-template #standardCell let-data="data" let-col="col">
                        <span>{{ getData(row, column.name) }}</span>
                    </ng-template>
                </td>
            </tr>
        </tbody>
    </table>

    <div *ngIf="rows.length > 0" class="ng2-ya-table-pagination-result">
        <span *ngFor="let s of state.language.info.split(' ')">
            <span [ngSwitch]="s">
                <span *ngSwitchCase="'_START_'">{{(state.paging.currentPage - 1) * state.paging.itemsPerPage +
                    1}} </span>
                <span *ngSwitchCase="'_END_'">{{(state.paging.currentPage - 1) * state.paging.itemsPerPage +
                    rows.length}} </span>
                <span *ngSwitchCase="'_TOTAL_'">{{state.paging.recordsFiltered}} </span>
                <span *ngSwitchDefault>{{s}} </span>
            </span>
        </span>
    </div>
    <div class="ng2-ya-table-pagination">
        <select *ngIf="paging.showPaging" class="form-control form-select" [formControl]="itemsPerPage">
            <option *ngFor="let pn of paging.itemsPerPageOptions" [value]="pn">{{pn}}</option>
        </select>
        <pagination *ngIf="rows.length > 0" [formControl]="currentPage"
            [totalItems]="state.paging.recordsFiltered" [itemsPerPage]="state.paging.itemsPerPage"
            [maxSize]="paging.maxSize" [boundaryLinks]="false" [rotate]="false"
            [firstText]="state.language.pagination.first" [lastText]="state.language.pagination.last"
            [nextText]="state.language.pagination.next" [previousText]="state.language.pagination.previous">
        </pagination>
    </div>
</div>